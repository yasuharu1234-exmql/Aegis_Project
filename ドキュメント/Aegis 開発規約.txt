📘 Aegis 開発規約（簡易版 / Phase 2以降）
0. この文書の位置づけ


本規約は Aegis 開発時の安全装置である


設計思想より 事故防止・復旧容易性を最優先する


AI実装者・監査役（Gemini / Genspark）ともに遵守対象



1. 変更ファイル数の制限（最重要）
🔒 原則


1回の作業で変更してよいファイルは最大2ファイルまで


例外なし（コメント追加・軽微修正も含む）


🔍 監視ポイント（Gemini / Genspark向け）


3ファイル以上に言及が出た時点で 警告


「ついでに」「合わせて」等の表現は 危険兆候



2. データ構造変更の厳格な手順
📐 データ構造とは


struct


enum


Context（CLA_Data 等）のメンバ


レイヤー間の受け渡し情報


🧭 手順（厳守）
Step 1
👉 データ側のみ修正
（ロジック・処理コードは一切触らない）
Step 2
👉 単体コンパイル確認


コンパイルエラー 0


ワーニング 0


Step 3
👉 問題なければ、次の作業単位でロジック実装
🔍 監視ポイント


データ変更とロジック変更が同時に出てきたら 即NG


「ついでにロジックも直しました」は 設計違反



3. 絶対禁止事項（即ロールバック対象）
🚫 ファイル・構造系


#include 行の変更（1文字でもNG）


既存メンバ変数の削除・意味変更


enum / struct 名の変更・改名


ディレクトリ構造の変更提案


🚫 設計・思考系


再設計・リファクタリング


最適化・整理・「より良くしました」


仕様の拡張・解釈変更


👉 Aegisでは「良かれと思って」は最大の事故原因

4. AI実装者の役割定義
🧠 ChatGPT（PM / 設計統括）


作業範囲の明確化


修正対象ファイルの指定


手順違反の検知と停止判断


🔍 Gemini / Genspark（監査役）


コンテキスト消費は気にしなくてよい


以下を重点監視：


監視チェックリスト


変更ファイル数 > 2 になっていないか


データとロジックが同時に触られていないか


include / enum / struct 名が変わっていないか


「設計を良くする」系の発言が出ていないか


👉
「ちょっと大きすぎません？」と言うだけでOK
止めるのが仕事。解決策は不要。

5. ロールバックの原則


迷ったら 必ずロールバック


AIの説明より コンパイル結果を信頼


正本（Master）は「最後に成功した状態」



6. 合言葉（重要）

「壊さないために、遅くする」

Aegisは


速く作るEAではない


壊れた理由を説明できるEAである



📌 まとめ（1行版）


変更は最大2ファイル


データ → コンパイル → ロジック


include・enum・structは触るな


大きくなったら止める


