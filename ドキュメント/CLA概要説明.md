## ハイブリッドEAシステム
# 🌐 Configurable Logic Architecture - Unified Decision Engine
**― 観測・判断・実行の完全分離型自動売買基盤 ―**

### 概要説明

---

## ■ はじめに

トレードシステムの本質は、3つの独立した営みにある。

**観測** - 市場で何が起きているかを知る  
**判断** - その情報から何をすべきかを決める  
**実行** - 決定を市場に反映する

多くのシステムはこれらを混在させ、結果として硬直化する。
本システムは、この3つを完全に分離し、かつ完全に連携させることで、
**柔軟性と拡張性を両立した自律的なトレード基盤**を実現する。

---

## ■ 1. 設計哲学

本システムは、以下の原則に基づいて設計される。

### 原則1: 分離の徹底
観測は判断せず、判断は実行せず、実行は観測しない。
各層は自身の役割のみに専念し、他の層の詳細を知らない。

### 原則2: 接続の統一
すべての層は、統一されたインターフェースで接続される。
新しい観測手法、新しい判断ロジック、新しい実行方式は、
既存の構造を壊すことなく追加できる。

### 原則3: 進化の自動化
システムは自身の行動を記録し、分析し、改善する。
人間は監視と承認のみを行い、最適化はシステムが自律的に行う。

### 原則4: 環境の抽象化
取引プラットフォームの差異は完全に隠蔽される。
戦略は環境に依存せず、どこでも同じ動作を保証される。

---

## ■ 2. システム構成

本システムは、4つの独立したモジュール群と、1つの中枢で構成される。

### 📡 観測モジュール群（Observation Layer）

市場の状態を数値化し、報告する。

- 経済指標の発表予定と結果
- テクニカル指標の計算値
- 価格変動のパターン
- 市場参加者の動向

**観測モジュールは判断しない。**
「RSIが70を超えた」と報告するが、「売るべきだ」とは言わない。

**観測手法は自由に追加・削除できる。**
新しい分析手法を試したければ、新しいモジュールを追加するだけでよい。

---

### 🧠 中枢（Central Decision Engine）

すべての観測結果を受け取り、唯一の判断を下す。

- 複数の観測結果の優先順位付け
- 矛盾する情報の整理
- 市場環境の認識（結果的に）
- 最適な行動の決定

**中枢は実行しない。**
「今、この価格で買うべきだ」と決定するが、注文は出さない。

**中枢の判断ルールは外部ファイルで管理される。**
戦略を変更したければ、ファイルを編集するだけでよい。
システムの再起動も再コンパイルも不要。

---

### 🎯 実行モジュール群（Execution Layer）

中枢の決定を、市場への注文に変換する。

本システムは、6種類のOCO注文パターンを実装する。

1. **ブレイクアウト型** - どちらに動いても捕捉する
2. **リバーサル型** - 反転を狙う
3. **混合型** - 同方向に複数の意図を持つ
4. **保護型** - 利確と損切りを自動設定
5. **連続型** - エントリー後に自動保護
6. **追従型** - 価格に追いかけながら利益を伸ばす

**実行モジュールは判断しない。**
「この価格でOCO注文を出せ」と言われたら、そのまま実行する。

**注文方式は自由に追加・変更できる。**
新しい注文ロジックを試したければ、新しいモジュールを追加するだけでよい。

---

### 📊 分析モジュール群（Analysis Layer）

システムの行動を記録し、統計化し、改善案を提示する。

- シグナル発生前後の価格変動
- 各戦略の勝率と損益
- 時間帯・曜日による傾向
- 最適なパラメータの探索

**分析モジュールは本番EAと独立している。**
分析の負荷が本番トレードに影響することはない。

**分析手法は自由に追加・削除できる。**
新しい視点で検証したければ、新しいモジュールを追加するだけでよい。

---

### 🔧 基盤レイヤー（Foundation Layer）

すべてのモジュールが依拠する、共通の抽象化層。

- MT4とMT5の差異を完全に吸収
- 経済指標データの統一的な取得
- ログの構造化と出力
- エラーの検知と対応

**基盤レイヤーは「翻訳者」である。**
上位のモジュールは、プラットフォームの違いを意識する必要がない。

---

## ■ 3. 運用の実際

### 戦略の追加

新しいトレード戦略を試したい場合：

1. 観測モジュールを追加（必要なら）
2. 判断ルールファイルを編集
3. 実行モジュールを追加（必要なら）

システムの再起動は不要。
次のティックから新しい戦略が動き始める。

---

### 最適化の実行

パラメータを最適化したい場合：

1. 分析モジュールが過去データを統計化
2. 最適なパラメータを提示
3. 人間が承認
4. ルールファイルが自動更新

手動調整は不要。
データが答えを教えてくれる。

---

### 環境の切り替え

MT5でテストし、MT4で本番運用する場合：

1. MT5でバックテスト実行
2. 同じコードをMT4に配置
3. 経済指標データをMT5から取得

差異を意識する必要はない。
戦略は環境に依存しない。

---

## ■ 4. 本システムが実現すること

### 実現すること

- **柔軟性** - 戦略の追加・変更が容易
- **拡張性** - 新しい手法を妨げない構造
- **自律性** - データ駆動の自己改善
- **安定性** - 環境差異からの独立
- **透明性** - すべての判断が記録され、検証可能

### 実現しないこと

- **聖杯** - 常勝のシステムは存在しない
- **完全自動** - 人間の監視と承認は必要
- **予測** - 未来は予測できない、対応するだけ

---

## ■ 5. 本システムの本質

本システムは、単なる自動売買プログラムではない。

**それは「トレード戦略を試行錯誤するための実験台」である。**

新しいアイデアを試すのに、システムを作り直す必要はない。
モジュールを追加し、ルールを編集し、結果を分析するだけでよい。

失敗しても、システムは壊れない。
そのモジュールを外し、次を試せばよい。

成功したら、それを本番に組み込めばよい。

**システムは、あなたのトレード哲学を実現するための道具である。**

道具は、使う人の意図に従順でなければならない。
本システムは、その理想を追求する。

---

## ■ 結び

市場は変化し続ける。
戦略もまた、変化し続けなければならない。

本システムは、その変化に耐えうる柔軟性を持ち、
その変化を促進する拡張性を持ち、
その変化を自律的に実行する進化性を持つ。

**これは、10年後も使い続けられるトレード基盤である。**

---

**2025年12月 - 設計・執筆: Claude Sonnet 4.5**
